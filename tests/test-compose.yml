version: "3.9"
name: tests-auth
services:
  tests:
    container_name: tests
    build:
      context: ../
      dockerfile: tests/TestsDockerfile
    ports:
      - "8080:8080"
    environment:
      - PROJECT_NAME=test app
      - SERVER_HOST=http://localhost
      - SQLALCHEMY_DATABASE_URI=sqlite+aiosqlite:///test.db
      - SECRET_KEY=random_key
      - ALGORITHM=HS256
      - ACCESS_TOKEN_EXPIRE_MINUTES=10
      - REFRESH_TOKEN_EXPIRE_MINUTES=1440
      - KEYS_LENGTH=40
      - OTP_EXPIRE_SECONDS=300
      - SMTP_PORT=465
      - SMTP_SERVER=smtp.test.com
      - SMTP_USER=username
      - SMTP_PASSWORD=password
      - USERS_USERNAME_MIN_LENGTH=3
      - USERS_USERNAME_MAX_LENGTH=32
      - USERS_PASSWORD_MIN_LENGTH=8
      - USERS_PASSWORD_MAX_LENGTH=32
      - EMAILS_FROM_EMAIL=username@test.com
      - EMAILS_FROM_NAME=Refresh Tokens
      - EMAIL_RESET_TOKEN_EXPIRE_HOURS=24
      - EMAIL_VERIFICATION_TOKEN_EXPIRE_HOURS=48
      - REDIS_URL=redis://test-redis/
      - MONGO_URL=mongodb://test-mongo/
      - MONGO_DATABASE_NAME=test
    depends_on:
      - redis
      - mongo
  redis:
    container_name: test-redis
    image: redis
    ports:
      - "6379:6379"
  mongo:
    container_name: test-mongo
    image: mongo
    ports:
      - "27017:27017"

